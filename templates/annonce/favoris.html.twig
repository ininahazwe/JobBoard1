{% extends 'base-dashboard.html.twig' %}

{% block title %}Mes annonces!{% endblock %}

{% block body %}
    <!-- Listing Section -->
    <section class="ls-section">
        <div class="auto-container">
            <div class="filters-backdrop"></div>
                <div class="row">
            <!--End Page Title-->
                    <div class="content-column col-lg-12 col-md-12 col-sm-12">
                    <div class="ls-outer">
                        <button type="button" class="theme-btn btn-style-two toggle-filters">Show Filters</button>

                        {% if annonces|length > 1 %}
                        <!-- ls Switcher -->
                        <div class="ls-switcher">
                            <div class="showing-result">
                                <div class="text">Showing <strong>41-60</strong> of <strong>944</strong> jobs</div>
                            </div>
                            <div class="sort-by">
                                <select class="chosen-select">
                                    <option>New Jobs</option>
                                    <option>Freelance</option>
                                    <option>Full Time</option>
                                    <option>Internship</option>
                                    <option>Part Time</option>
                                    <option>Temporary</option>
                                </select>

                                <select class="chosen-select">
                                    <option>Show 10</option>
                                    <option>Show 20</option>
                                    <option>Show 30</option>
                                    <option>Show 40</option>
                                    <option>Show 50</option>
                                    <option>Show 60</option>
                                </select>
                            </div>
                        </div>
                        {% endif %}

                        <div class="row">
                            {% for annonce in annonces %}
                                <!-- Job Block -->
                                <div class="job-block col-lg-6 col-md-12 col-sm-12">
                                    <div class="inner-box">
                                        <div class="content">
                                                        <span class="company-logo">
                                                            {% for logo in annonce.stand.logo %}
                                                                <img src="{{ asset('uploads/' ~ logo.nom) }}" alt="{{ logo.nom }}" style="width: 100px">
                                                                    {% else %}
                                                                <img src="{{ asset('uploads/stand.png') }}" alt="" style="width: 100px">
                                                            {% endfor %}
                                                        </span>
                                            <h4><a href="{{ path('annonce_page', {'slug' : annonce.slug}) }}">{{ annonce.nom|capitalize|slice(0, 20) }}</a></h4>
                                            <ul class="job-info">
                                                <li><span class="icon flaticon-briefcase"></span> Segment</li>
                                                <li><span class="icon flaticon-map-locator"></span> London, UK</li>
                                                <li><span class="icon flaticon-clock-3"></span> 11 hours ago</li>
                                                <li><span class="icon flaticon-money"></span> $35k - $45k</li>
                                            </ul>
                                            <ul class="job-other-info">
                                                {% if annonce.horaires %}<li class="time">{{ annonce.horaires }}</li>{% endif %}
                                                {% if annonce.accessibilite %}<li class="privacy">{{ annonce.accessibilite ? 'CMR' : 'Non CMR' }}</li>{% endif %}
                                                {% if annonce.contrat %}<li class="required">{{ annonce.contrat }}</li>{% endif %}
                                            </ul>
                                            {% if is_granted('ROLE_CANDIDAT') %}
                                                {% set isFavorite = false %}
                                                {% for favoris in annonce.favoris %}
                                                    {% if favoris.id == app.user.id %}
                                                        {% set isFavorite = true %}
                                                    {% endif %}
                                                {% endfor %}
                                                {% if isFavorite %}
                                                    <a href="{{ path('annonce_retrait_favoris', {id: annonce.id}) }}" class="bookmark-btn"><i class="fas fa-heart"></i></a>
                                                {% else %}
                                                    <a href="{{ path('annonce_ajout_favoris', {id: annonce.id}) }}" class="bookmark-btn"><i class="far fa-heart"></i></a>
                                                {% endif %}
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            {% else %}
                                <section class="call-to-action">
                                    <div class="auto-container">
                                        <div class="outer-box wow fadeInUp animated" style="visibility: visible; animation-name: fadeInUp;">
                                            <div class="content-column">
                                                <div class="sec-title">
                                                    <h2>Aucune annonce mise en favoris !</h2>
                                                    <div class="text">Cliquez sur le coeur en haut d'une annonce pour la sauvegarder et la retrouver ici </div>
                                                    <a href="{{ path('annonces_all') }}" class="theme-btn btn-style-one bg-blue"><span class="btn-title">Voir toutes les offres</span></a>
                                                </div>
                                            </div>

                                            <div class="image-column" style="background-image: url('{{ asset('uploads/calltoaction.png') }}');">
                                                <figure class="image"><img src="{{ asset('uploads/calltoaction.png') }}" alt=""></figure>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}